<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="Embrace the trend">
<meta property="og:type" content="website">
<meta property="og:title" content="Shaclow&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Shaclow&#39;s Blog">
<meta property="og:description" content="Embrace the trend">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shaclow&#39;s Blog">
<meta name="twitter:description" content="Embrace the trend">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/3/"/>





  <title>Shaclow's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Shaclow's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Hello,my world.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/23/Java网络编程(九)番外 日志/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen JianLun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shaclow's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/Java网络编程(九)番外 日志/" itemprop="url">Java网络编程(九)番外 日志</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-23T00:52:49+08:00">
                2018-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我们可以为每个类创建一个日志工具</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Logger auditLogger=Logger.getLogger(<span class="string">"requests"</span>);</span><br></pre></td></tr></table></figure>
<p>日志工具是线程安全的，所以他们存储在共享的静态字段没问题，整个类共用一个，</p>
<p>多个Logger对象可以输出到同一个日志文件中，但一个Logger只能将日志记录到一个文件中</p>
<p>参数可能是一个文件名字 可能是一个数据库 可能是一个SOAP服务 同意主机运行的另一个Java程序</p>
<p>一旦有了日志工具就可以多个方法写入日志</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">catch</span>(RuntimeException ex)&#123;</span><br><span class="line">    logger.log(Level.SEVERE,<span class="string">"unexpected error "</span>+ex.getMessage(),ex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第一个参数代表level  SEVERE WARNING INFO CONFIG FINE FINER FINEST</p>
<p>一般实际使用上是用前三个 SEVERE WARNING INFO三个 后三个最多也就调试用用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//记录info </span></span><br><span class="line">logger.info(<span class="keyword">new</span> Date()+<span class="string">" "</span>+connection.getRemoteSocketAddress());</span><br></pre></td></tr></table></figure>
<p>如果只是记录错误一般就寄生在catch语句块就行</p>
<p>默认情况下日志是输出在控制台上的但是如果你想放入到一个持久的目标的位置</p>
<p>可以在代码也可以在配置文件中指定</p>
<p>java.util.logging.config.file 系统属性采用常规的属性格式指向控制日志记录的一个文件</p>
<p>可以在启动虚拟机的时候 传入 -Djava.util.logging.config.file=<em>filename</em>参数来设置该属性</p>
<p>日志属性文件 略 详情看别的地方的介绍</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/23/Java网络编程(六)HTTP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen JianLun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shaclow's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/Java网络编程(六)HTTP/" itemprop="url">Java网络编程(六)HTTP</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-23T00:52:49+08:00">
                2018-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>HTTP </p>
<p>Http指定客户端与服务器如何建立链接、客户端如何从服务器请求数据，服务器如何响应请求，以及最后如何关闭链接。Http链接使用TCP/IP来传输数据，对于从客户端到服务器的每个请求，都有四个步骤</p>
<p>Http1.0</p>
<ol>
<li>默认情况，客户端在端口80打开与服务器的一个TCP连接，URL中可以指定其他接口</li>
<li>客户端向服务器发送信息，请求路径上的资源   请求包括首部 可选地 一个空行 请求数据</li>
<li>服务器向客户端发送响应。响应以响应码开头，后面是包含元数据的首部、一个空行以及所请求的文档或错误信息</li>
<li>服务器关闭连接</li>
</ol>
<p>Http1.1 及之后版本，可通过一个TCP连接连续发送多个请求和响应，也就是２.３步可以指向多次，而且响应和请求可以分成多个块进行发送</p>
<p>每个请求和响应都有相同的基本形式：</p>
<ul>
<li>一个首部行</li>
<li>一个包含元数据的HTTP首部</li>
<li>一个空行</li>
<li>消息体</li>
</ul>
<p>第一行称为请求行（首部行？） 定义返回资源的方式 路径 Http版本 </p>
<p>还有其他信息 （Keyword:Value）</p>
<p>关键词不区分大小写，如果一个值太长，可以在下一行最前面增加一个空格或制表符，然后接上一行（都要用Ascll）</p>
<p>首部中的行以一个回车换行对结束</p>
<p>一些键值对</p>
<ul>
<li>User-Agent</li>
<li>Host 说明主机</li>
<li>Accept 指明可以指定可以使用那个数据类型 后面接MIME类型</li>
</ul>
<p>MIME类型分为两级：类型和子类型。子类型是对类型的详细补充</p>
<ul>
<li>text/*</li>
<li>image/*</li>
<li>model/* 3D模型</li>
<li>audio/* 声音</li>
<li>video/* 表示移动的图标可能包含声音</li>
<li>application/* 二进制数据</li>
<li>message/* 表示协议特定的信封 email信息或Http响应等等</li>
<li>multipart/* 表示多个文档和资源的容器</li>
</ul>
<p>最后请求以一个空行结束 也就是 两个回车换行对  \r\n\r\n</p>
<p>响应 一个状态行开始 后面一个首部（也是采用键值对） 然后一个空行，然后是请求资源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Date:xxxxxx</span><br><span class="line">Server:Apache</span><br><span class="line">Connection:close  //承诺响应发送时关闭连接</span><br><span class="line">Content-Type:text/html; charset=ISO-8859-1</span><br><span class="line">Content-length:115   //不考虑首部的长度</span><br><span class="line">&lt;html&gt;</span><br><span class="line">.....</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>响应码有很多    有问题去查一下就行 p173</p>
<p>100-199 总表示一个提供信息的响应 200-299 总指示成功 300-399 表示重定向 400-499 客户端错误 500-599 服务器错误</p>
<p>HTTP  1.0  会为每个请求打开一个新连接。实际上典型Web会话中打开和关闭所有链接所花费的时间远大于实际传输数据的时间，特别是很多小文档的会话，特别是那种加密的链接</p>
<p>客户可以在首部添加</p>
<p>Connectiond:Keep-Alive  指定重用一个socket</p>
<p>URL类默认支持keep-alive 除非显式关闭，如果再次连接到同一个服务器就会重用socket。可以利用系统属性，控制java如何使用http keep-alive</p>
<ul>
<li>http.keepAlive true/false  Http Keep-Alive 的是否启用 默认开启</li>
<li>http.maxConnections 希望同时保持打开的socket数 默认为5</li>
<li>http.keepAlive.remainingData  若为true 使Java丢弃连接后之后完成清理java6后支持（默认false）</li>
<li>sun.net.http.errorstream.enableBuffering true时尝试缓存400和500级响应的相对小的错误六，从而释放连接，以备重用 默认false</li>
<li>sun.net.http.errorstream.bufferSize 为缓冲错误流使用的字节数 默认4096字节</li>
<li>sun.net.http.errorstream.timeout 为读错误流超时前的毫秒数 默认300ms</li>
</ul>
<p>Http 2.0 时在传输层完成优化，具体细节是屏蔽的，java还不支持？ 不过你只要用URL/URLConnection类去访问http服务器你得程序不做修改就可使用该功能</p>
<p>Http方法</p>
<p>请求  起始行 首部 请求主题，是包含资源的请求才有（post/put）</p>
<p>Http有四种方法 get post put delete</p>
<ul>
<li>GET没有副作用，失败可重复用，它的输出通常会缓存，不过可通过首部控制 而且没有指明默认用get</li>
<li>PUT 将资源上传到一个服务器，没有副作用出错可重复执行，不过有幂等性，如果将连续两次把同个文档放在服务器同一个位置，和放一次对于服务器的状态是一样的</li>
<li>DELETE 从一个URL删除一个资源 没有副作用也是幂等的，可以多次删除不会报错</li>
<li>POST 将资源上传服务器，但没有说明如何处理该资源 POST要用于不能重复的不安全的操作  POST的信息量也没有限制</li>
<li>HEAD 就是个GET不过只返回头部</li>
<li>OPTIONS 允许客户端询问服务器可以如何处理一个资源</li>
<li>TRACE 会回显客户端请求进行调试</li>
</ul>
<p>URL类使用GET方法进行通讯 之后的URLConnection类支持上面四种方法</p>
<h3 id="请求主体"><a href="#请求主体" class="headerlink" title="请求主体"></a>请求主体</h3><p>GET方法获取URL所标识资源的一个表示。用GET从服务器获取的资源的具体位置由路径和查询字符串的不同部分指定。</p>
<p>而POST和PUT更复杂，因为除了提供url之外，还要提供资源的表示（？其实就是资源主体）一般资源会在首部指明两个 Content-length Content-type</p>
<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>它有时候不包含数据，只是指示服务器上的而数据   它只能时非空白符的ASCLL 不能有逗号和分号</p>
<p>在响应中的首部的Set-Cookie 有指定</p>
<p><code>Set-Cookie: cart=AKKQQ</code>   （可以有多个，一个cookie对应一个set-cookie）</p>
<p>或者请求时会在首部中指定发送</p>
<p><code>Cookie: cart=AKKQQ</code></p>
<p>一般来说，cookie来自哪个服务器就会用于哪个服务器 比如来自<a href="http://www.baidu.com的cookie只会发给www.baidu.com的服务器。不过可以指定cookie应用于整个子域，而不只是最初的服务器。" target="_blank" rel="noopener">www.baidu.com的cookie只会发给www.baidu.com的服务器。不过可以指定cookie应用于整个子域，而不只是最初的服务器。</a></p>
<p><code>Set-Cookie: username=hehe;Domain=.baidu.com</code></p>
<p>这样cookie可能能发给什么 cc.baidu.com  oob.baidu.com  (如果存在的话哈哈)</p>
<p>但是所设的子域必须时服务器直接所属的域，比如你baidu域的主机不能设置成lunlun.com域</p>
<p>一些网站会将一个域中的一个图像或某个内容嵌入到另一个域的一个页面中，从而通过这个这个嵌入内容来设置cookie，这种就实现了没有真正访问这个域也能设置 到这个域的cookie。 这叫第三方cookie 现在慢慢开始阻塞这种cookie</p>
<p>Cookie的作用域其实对于路径也有限制 比如 xxxx/aab设置一个cookie  你只能在xxxx/aab或其子树域下使用cookie 而xxxx/bba 这种域毫无办法。当然你可以设置使用路径</p>
<p><code>Set-Cookie: username=hehe;Path=/kkk</code>  就会在/kkk及其子树域有效 但是如果你不设置Domain默认是那个xxxx服务器域内</p>
<p>一些其他的cookie设置</p>
<p>设置过期时间</p>
<p>expires=Wed,21-Dec-2018 16:33:09 GMT</p>
<p>Max-Age=3600   单位是秒</p>
<p>安全性</p>
<p>secure 不用设置值   代表浏览器拒绝通过非安全通道发送这种cookie</p>
<p>httponly 也是安全相关，说明浏览器只通过http/https 返回cookie尤其强调不能通过js返回防范xss</p>
<p>CookieHandler 其实才是真正来实现http状态管理的，而他提供两个方法 最重要的是setDefault(Cookiemanager)用来设置你的handler的内核，而若没有他会有一个默认的，你可以通过 getDefault()去获得这个    其中CookieHandler还有两个抽象方法就是 put(uri,responseheaders) 和get(uri,requestheaders)</p>
<blockquote>
<p>我们可以认为CookieHandler是一个无形的神的旨意，而CookieManger是这种精神的传承实体，而CookieManger本身是一个复杂的个体，一分为二是CookieStore CookiePolicy 一个是管理现存的cookie,一个是决定是否接收cookie</p>
</blockquote>
<h2 id="CookieManager"><a href="#CookieManager" class="headerlink" title="CookieManager"></a>CookieManager</h2><p>java.net.CookieHandler 定域了存储和获取cookie的一个api，</p>
<p>提供了一个具体的子类 java.net.CookieManager 默认情况下我们需要启用cookie</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CookieManager m=<span class="keyword">new</span> CookieManager();</span><br><span class="line">CookieHandler.setDefault(m);</span><br><span class="line"><span class="comment">//一个cookieManager安装完成</span></span><br></pre></td></tr></table></figure>
<p>默认提供的存储策略</p>
<ul>
<li>CookiePolicy.ACCEPT_ALL</li>
<li>CookiePolicy.ACCEPT_NONE</li>
<li>CookiePolicy.ACCEPT_ORIGINAL_SERVER 只接受原服务器的cookie（默认）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CookieManager m=<span class="keyword">new</span> CookieManager();</span><br><span class="line">m.setCookiePolicy(CookiePolicy.ACCEPT_ORIGINAL_SERVER);</span><br><span class="line">CookieHandler.setDefault(m);</span><br></pre></td></tr></table></figure>
<p>只需要实现CookiePolicy 接口并覆盖shouldAccept方法 可以自己实现存储策略</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过url去获得头部信息，进行域的判断</span></span><br><span class="line"><span class="keyword">import</span> java.net.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NoGovernmentCookies</span> <span class="keyword">implements</span> <span class="title">CookiePolicy</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldAccept</span><span class="params">(URI uri,HttpCookie cookie)</span></span>&#123;</span><br><span class="line">        <span class="comment">//从url和cookie的发送域双重保证分析</span></span><br><span class="line">  <span class="keyword">if</span>(uri.getAuthority().toLowerCase().endsWith(<span class="string">".gov"</span>)||cookie.getDomain().toLowerCase().endsWith(<span class="string">".gov"</span>))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;          <span class="comment">//拒绝存储    </span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BlacklistCookiePolicy</span> <span class="keyword">implements</span> <span class="title">CookiePolicy</span> </span>&#123;</span><br><span class="line">    String[] blacklist;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BlacklistCookiePolicy</span><span class="params">(String[] list)</span> </span>&#123;</span><br><span class="line">        blacklist = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldAccept</span><span class="params">(URI uri, HttpCookie cookie)</span>  </span>&#123;</span><br><span class="line">        String host;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            host =  InetAddress.getByName(uri.getHost()).getCanonicalHostName();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</span><br><span class="line">            host = uri.getHost();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;blacklist.length; i++) &#123;</span><br><span class="line">	    <span class="keyword">if</span> (HttpCookie.domainMatches(blacklist[i], host)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> CookiePolicy.ACCEPT_ORIGINAL_SERVER.shouldAccept(uri, cookie);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="CookieStore"><a href="#CookieStore" class="headerlink" title="CookieStore"></a>CookieStore</h2><p>cookiestore可以实现该接口，但是并在CookieManager实例化时传给它。你不能在CookieManager实例化之后设置它的CookieStore</p>
<p>有时候必须本地存放和获取cookie 这说明应用退出下一次再启用时加载，这时候就需要获取CookieStore</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CookieStore store=m.getCookieStore();  <span class="comment">//通过cookiemanager去获得</span></span><br></pre></td></tr></table></figure>
<p>CookieStore 允许增加删除列出cookie 控制在正常http请求和响应流之外发送cookie</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(URI uri,HttpCookie cookie)</span></span></span><br><span class="line"><span class="function">List&lt;HttpCookie&gt; <span class="title">get</span><span class="params">(URI)</span></span></span><br><span class="line"><span class="function">List&lt;HttpCookie&gt; <span class="title">getCookies</span><span class="params">()</span></span></span><br><span class="line"><span class="function">List&lt;URI&gt; <span class="title">getURIs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(URI uri,HttpCookie cookie)</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">removeAll</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<p>每个cookie都封装在一个HttpCookie对象中，它提供了一些方法去访问属性</p>
<p>感觉有用的  set/getDomain set/getPath set/getMaxAge   set/getValue</p>
<p>还有其他，不过有些方法已经过时并废弃了</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/23/Java网络编程(八)客户端Socket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen JianLun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shaclow's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/Java网络编程(八)客户端Socket/" itemprop="url">Java网络编程(八)客户端Socket</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-23T00:52:49+08:00">
                2018-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>telnet去研究协议</p>
<p><code>telnet localhost 25</code></p>
<p>Socket是在网络上进行网络通信，指定端口和服务器</p>
<p><code>Socket socket=new Socket(&quot;time.nist.gov&quot;,13);</code></p>
<p><code>socket.setSoTimeout(15000)</code>毫秒为单位， 建议使用，因为i一个有问题的服务器和你链接，然后停止对华，没有主动关闭连接，设置超时让你能在服务器挂起，超时然后返回一个SocketTimeoutException</p>
<p>socket和urlconnection差不多，可以获得<code>getInputStream()</code>获取输入流</p>
<p>不是所有的协议都用ASCII编码去做，甚至不一定用文本来进行数据传输。比如有时候是一个32位无符号二进制数（big-endian）有时候没有合适的api处理你就得咬牙自己编码解决处理</p>
<p>客户端的服务器写入  socket的请求和写入其实差不多，没有什么限制</p>
<ul>
<li><code>socket.getOutputStream</code></li>
<li><code>new OutputStreamWriter(outputStream,&quot;UTF-8&quot;)</code></li>
<li><code>writer.write(&quot;xxx&quot;)</code></li>
<li><code>writer.flush()</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Socket socket=<span class="keyword">new</span> Socket(<span class="string">"xx.org"</span>,<span class="number">2333</span>);</span><br><span class="line">socket.setSoTimeout(<span class="number">15000</span>);</span><br><span class="line"></span><br><span class="line">OutputStream out=socket.getOutputStream();</span><br><span class="line">Writer writer=<span class="keyword">new</span> OutputStreamWriter(out,<span class="string">"UTF-8"</span>);</span><br><span class="line">writer=<span class="keyword">new</span> BufferedWriter(writer);</span><br><span class="line"></span><br><span class="line">InputStream in=socket.getInputStream();</span><br><span class="line">BufferedReader reader=<span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(in,<span class="string">"UTF-8"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line">writer.write(<span class="string">"xxx"</span>);</span><br><span class="line">writer.flush();</span><br><span class="line"></span><br><span class="line"><span class="comment">//按一个个字去读取</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> c=reader.read();c!=-<span class="number">1</span>;c=reader.read())&#123; System.out.println((<span class="keyword">char</span>) c);&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//按一行行去读取</span></span><br><span class="line"><span class="keyword">for</span>(String line=reader.readLine();line!=<span class="keyword">null</span>;line=reader.readLine())&#123;</span><br><span class="line">    <span class="keyword">if</span>(line.startsWith(<span class="string">"xxx"</span>))</span><br><span class="line">        System.out.println(<span class="string">"xxxx"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>输出流的三层包装  先分别从socket 获得输出流 将其保证成一个OuputStreamWriter再包装成成一个BufferedWriter<ul>
<li>OutputStream out=socket.getOutputStream()</li>
<li>Writer writer =new OutputStreamWriter(out,”UTF-8”);  注意这里要注意编码</li>
<li>writer=new BufferedWriter(writer)</li>
</ul>
</li>
<li>输入流也是三层包装，不过它更加简洁，我感觉更好<ul>
<li>InputStream in=socket.getInputStream()</li>
<li>BufferedReader reader=new BufferedReader(new InputStreamReader(in,”UTF-8”))</li>
</ul>
</li>
</ul>
<p>半关闭Socket</p>
<p>其实就是是关闭一个输入或输出流</p>
<p><code>shutdownInput()</code> 和 <code>shutdownOutput()</code> 用来关闭输入或输出流</p>
<p><code>isInputShutdown()</code> 和 <code>isOutputShutdown()</code> 用来判断</p>
<p>记住关闭后再开启输入或输出流 是直接报错 IOException 不要相信 什么InputStream是返回-1</p>
<p>构造和连接Socket</p>
<p><code>Socket(Proxy proxy)</code>  <code>Socket(ScoketImpl impl)</code> 代理或者加密机制</p>
<p>除了最基本的还有<code>Socket(host,port,InetAddress,localport)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    InetAddress inward=InetAddress.getByName(<span class="string">"router"</span>);</span><br><span class="line">    Socket socket=<span class="keyword">new</span> Socket(<span class="string">"mail"</span>,<span class="number">25</span>,inward,<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//使用socket</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">    System.err.println(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过本地端口号传入0，表示不关心什么端口，只希望和本地主机名为 router的绑定网络接口</p>
<p>如果Socket无法识别服务名，则返回一个UnknownHostException异常 如果是本地接口或者服务器端口或者别的出了问题好像都是IOException异常</p>
<p>然后这个host可以是localhost挺有意思的，可以查看本机上的端口的服务器</p>
<p>构造不连接</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Socket socket=<span class="keyword">new</span> Socket();</span><br><span class="line">SocketAddress address=<span class="keyword">new</span> InetSocketAddress(host,port);</span><br><span class="line"></span><br><span class="line"><span class="comment">//....</span></span><br><span class="line">socket.connect(address,<span class="number">15000</span>);  <span class="comment">//参数二代表代表超时的加载等待的秒数</span></span><br></pre></td></tr></table></figure>
<p>Socket地址</p>
<p>我们可以看到一个很有趣的东西 SocketAddress 这是个只有默认构造的抽象类，说是可以支持非TCP 其实当前只支持TCP/IP的 Socket 实现类都是InetSocketAddress</p>
<p>SocketAddress主要用途是为暂时的socket连接信息，如IP和端口提供方便的存储，即使最初的socket已经断开并被垃圾回收这些信息可以立即构造一个新的socket</p>
<p>socket中提供方法去获得连接系统的地址</p>
<p><code>SocketAddress getRemoteSocketAddress()</code> 和 <code>SocketAddress getLocalSocketAddress()</code> 若socket未连接，则返回null</p>
<p>上面两个分别代表远程地址 和本地地址  类似有 <code>getPort()</code> <code>getLocalPort()</code> 即使socket关闭也能获取</p>
<p>一般来说本地的端口不用固定的，实际上默认也是随机的，只要不被占用的端口就行</p>
<p>InetSocketAddress 构造函数</p>
<ul>
<li>InetSocketAddress(InetAddress add,int port)</li>
<li>InetSocketAddress(String host, int port)</li>
<li>InetSocketAddress(int port)</li>
</ul>
<p>一般第三个好像服务器才能这样用？客户端用前两个？</p>
<p>还能用静态工厂方法 InetSocketAddress.createUnresolved(host,port) 从而不再在DNS查找主机</p>
<p><code>static InetSocketAddress createUnresolved(String host,int port)</code></p>
<p>InetSocketAddress 提供一些信息方法</p>
<ul>
<li>InetAddress getAddress()</li>
<li>int getPort()</li>
<li>String getHostName()</li>
</ul>
<p>代理服务器</p>
<p>Socket使用的代理服务器由socksProxyHost socksProxyPort系统属性控制，这些属性应用于系统中所有的socket 但是这个构造函数构建的socket会使用指定的代理服务器    可以传入 Proxy.NO_PROXY 完全绕过所有代理服务器，而直接连接远程主机，如果对方禁止直接连接，则会连接失败</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SocketAddress proxyAddress=<span class="keyword">new</span> InetSocketAddress(<span class="string">"xxx.com"</span>,<span class="number">1080</span>);</span><br><span class="line">Proxy proxy=<span class="keyword">new</span> Proxy(Proxy.Type.SOCKS,proxyAddress);</span><br><span class="line">Socket socket=<span class="keyword">new</span> Socket(proxy);</span><br><span class="line">SocketAddress remote=<span class="keyword">new</span> InetSocketAddress(<span class="string">"xx"</span>,<span class="number">11</span>);</span><br><span class="line">socket.connect(remote);</span><br></pre></td></tr></table></figure>
<p>分三个步骤</p>
<ul>
<li>构建SocketAddress 代表proxy的地址  然后构建Proxy  注意第一个是Proxy.Type.SOCKS</li>
<li>然后构建Socket(proxy) </li>
<li>构建SocketAddress 代表将要连接的远程地址 remote</li>
<li>再 socket.connect(remote)</li>
</ul>
<p>Proxy.Type.SOCKS 是java理解的唯一的一个底层代理类型，还有一个高层Proxy.Type.HTTP 用于应用层 还代表无代理的Proxy.Type.DIRECT</p>
<p>指示关闭</p>
<p><code>isClosed()</code> 判断socket是否关闭 如果关闭返回true  如果一个socket未开始过连接 会返回false 这是个不太好的判断了</p>
<p><code>isConnected()</code>不是判断是否连在一个远程主机，而是判断是否重未连接过服务器  如果是连接过关闭了也算true</p>
<p>所以判断一个连接是否当前正在打开</p>
<p>boolean connected=socket.isConnected()&amp;&amp; !socket.isClosed()</p>
<p><code>isBound()</code>告诉你socket是否成功绑定在本地系统的出站端口</p>
<p>toString() 就是返回之前所讲的host port等信息</p>
<p>设置Socket选项</p>
<p>客户端socket还有多个选项</p>
<p>TCP_NODELAY 默认为false   控制是否缓冲，有缓冲就会检测包是否送达，没缓冲就一有包准备好就发</p>
<p><code>setTcpNoDelay(boolean)</code> 和 <code>boolean getTcpNoDelay()</code> </p>
<p>如果socket没有这种支持，就会给出 socketException</p>
<p>SO_LINGER</p>
<p>设置close socket前的延迟时间，在准备关闭socket的延迟时间内，socket会会尽量处理数据包，并且阻塞close，一旦时间到了，如果有剩下的数据都会丢弃</p>
<p><code>setSoLinger(boolean on,int seconds)</code></p>
<p><code>int getSoLinger()</code>  好像不一定是返回秒数，，但是如果没开启这个功能会返回-1的</p>
<p>SO_TIMEOUT</p>
<p><code>void setSoTimeout(int milliseconds)</code>  ` 设置超时时间  毫秒   </p>
<p>`int getSoTimeout()  0代表无限时间，默认</p>
<p>不支持抛出socketException</p>
<p>SO_RCVBUF 和SO_SNDBUF设置缓冲区大小</p>
<p><code>setReceiveBufferSize(int size)</code> 和<code>int getReceiveBufferSize()</code></p>
<p><code>setSendBufferSize(int size)</code>和 <code>int getSendBufferSize()</code></p>
<p>看似是能分别设置输入和输出的缓冲区，实际上输入和输出区的缓冲区会统一取两者中较小的一个，而且set这个方法只是提供建议，实际底层实现可以完全忽略或调整，而且系统本身就有限制缓冲区的最大空间</p>
<p>SO_KEEPALIVE</p>
<p>保持服务器的活动的检测，偶尔发一个空闲的数据包（两个小时一次） 如果一段时间未收到响应则关闭客户端</p>
<p>如果没有keepalive 则可能会出现不活动服务器崩溃的客户端。默认不开启</p>
<p><code>setKeepAlive(boolean)</code>  和 <code>getKeepAlive()</code></p>
<p>OOBINLINE </p>
<p>TCP可以发送一个紧急数据，这个数据会被优先发送，而接收方收到紧急数据时也能知道，优先处理这个数据</p>
<p>java支持发送和接受这种数据</p>
<p><code>sendUrgentData(int data)</code> 几乎会立即发送参数中的最低位字节？？啥？ </p>
<p>接受端的接受方式虽平台和api有区别，有分别接受紧急和正常数据，也有将紧急数据适当顺序放入数据队列，并给出通知，让程序在队列中查找紧急数据</p>
<p>java 默认会忽略socket接受的紧急数据，如果希望设置</p>
<p><code>setOOBInline(boolean)</code> 和 <code>boolean getOOBINline()</code></p>
<p>打开后java也只是将紧急数据和正常数据一样对待，不会优先处理  什么特定字节对你程序特殊含义，而且不出现在常规输入流中，就能更快发送这个字节？？  （程序还会根据你的输入记录进行调整 优先级？？？）</p>
<p>SO_REUSEADDR</p>
<p>socket关闭时可能会仍然占用本地端口，传输延迟的数据，会接受但不处理延迟的数据包，保证这些数据不会传到下一个该端口的使用进程</p>
<p><code>setReuseAddress(boolean on)</code> 和 <code>boolean getReuseAddress()</code> </p>
<p>开启后,（默认为关闭） 别的socket就会被同样允许绑定到这个端口，这样有可能存在上一个socket未接收的数据</p>
<p>set这个方法必须在这个端口绑定新socket之前用，这时候意味 socket 使用 无参数构造，然后调用set方法，然后再connect ,而且之前的socket和重用老地址的新socket都要设置 reuseaddr才能有效</p>
<p>IP_TOS</p>
<p>好像是用来设置服务质量的 服务优先级</p>
<p><code>int getTrafficClass()</code> 和 <code>setTrafficClass(int trafficClass)</code></p>
<p> 业务类型由0-255的int给出 ，只取int的低位8位</p>
<p>而这个8位二进制数中，高6位属于 差分服务代码点 DSCP 和低2位 显式拥塞通知 ECN</p>
<p>DSCP最多由2^6 个不同业务流，不过由几个特别常见</p>
<p>DSCP</p>
<ul>
<li>默认  00000  尽力业务流</li>
<li>加速转发 101110 低损耗低延迟低抖动的业务流 通常仅用于网络容量的30%或更低</li>
<li>保证转发 多个  保证最多以一个指定速率传送</li>
<li>类选择器 xxx000 与IPv4 TOS首部向后兼容？（业务类型存储在前三位中）  这种好像比较过时了</li>
</ul>
<p>低两位是显式拥塞通知 </p>
<p>一般加速转发 为 0xB8  10111000</p>
<p>保证转发有多个细小分支 作用是网络拥塞的丢包优先级，优先级低的更早丢弃，不过<strong>较低</strong>优先级的包不会被完全被丢光</p>
<p>丢包率           最低                                                                           最高</p>
<p>低             AF11 001010         AF21 010010      AF31 011010   AF41 100010</p>
<p>中             AF12 001100                    010100               011100             100100</p>
<p>高                       001110                    010110                011110             100110</p>
<p>如果无法提供请求的服务类型会抛出 socketException </p>
<p><code>setPerformancePreferences(int connectionTime,int latency,int bandwidth)</code> 代表连接时间 延迟 和相对优先级</p>
<p>这些都是权重 比如 3 2 1 代表最重要的连接时间 其次是延迟 最小是带宽  让vm自己去实现，但可能会无操作</p>
<p>Socket异常</p>
<p>SocketException的子类</p>
<ul>
<li>BindException  端口占用或无端口权限</li>
<li>ConnectException  远程主机拒绝（可能是服务器端口在忙，或者服务器本身在忙）</li>
<li>NoRouteToHostException  连接超时</li>
</ul>
<p>IOException子类</p>
<ul>
<li>ProtocolException  接收数据违反TCP/IP 规则</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/23/Java网络编程(九)服务器Socket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen JianLun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shaclow's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/Java网络编程(九)服务器Socket/" itemprop="url">Java网络编程(九)服务器Socket</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-23T00:52:49+08:00">
                2018-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>服务器和客户端差不多，不过服务器的比较傲娇，需要一个ServerSocket 打头阵</p>
<p>ServerSocket是用来进行通信监听，到时建立连接，还是会使用一个常规的socket</p>
<p>服务器的socket的周期</p>
<ul>
<li>创建ServerSocket</li>
<li>使用accept方法 然后返回Socket对象</li>
<li>获取输入输出流</li>
<li>进行相互的交互，然后关闭连接</li>
<li>然后服务器继续使用accept方法监听下次连接</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">timeServer</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[]args)</span> </span>&#123;</span><br><span class="line">		ServerSocket server=<span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//监听端口13</span></span><br><span class="line">			server=<span class="keyword">new</span> ServerSocket(<span class="number">13</span>);</span><br><span class="line">			<span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">				Socket conn=<span class="keyword">null</span>;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//accept进行阻塞监听</span></span><br><span class="line">					conn=server.accept();</span><br><span class="line">					Writer out=<span class="keyword">new</span> OutputStreamWriter(conn.getOutputStream());</span><br><span class="line">					Date now=<span class="keyword">new</span> Date();</span><br><span class="line">                    <span class="comment">//一定要\r\n 来进行换行</span></span><br><span class="line">					out.write(now.toString()+<span class="string">"\r\n"</span>);</span><br><span class="line">					out.flush();</span><br><span class="line">				&#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">					</span><br><span class="line">				&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						<span class="keyword">if</span>(conn!=<span class="keyword">null</span>) conn.close();</span><br><span class="line">					&#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">						</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="keyword">if</span>(server!=<span class="keyword">null</span>)server.close();</span><br><span class="line">			&#125;<span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">				<span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>发送二进制数据  只需要写一个byte 数组的outstream  不需要一个writer    直接就构建一个byte数组进行传递  问题是如何将文本转换为二进制数组是个问题</p>
<p>多线程设计</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">multiTimeServer</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[]args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span>(ServerSocket server=<span class="keyword">new</span> ServerSocket(<span class="number">13</span>))&#123;</span><br><span class="line">			<span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">				<span class="keyword">try</span>&#123;</span><br><span class="line">					Socket socket=server.accept();</span><br><span class="line">					Thread task=<span class="keyword">new</span> timeThread(socket);</span><br><span class="line">					task.start();</span><br><span class="line">				&#125;<span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">					</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">timeThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Socket socket;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">timeThread</span><span class="params">(Socket connection)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">		<span class="keyword">this</span>.socket=connection;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Writer out=<span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream());</span><br><span class="line">			Date now =<span class="keyword">new</span> Date();</span><br><span class="line">			out.write(now.toString()+<span class="string">"\r\n"</span>);</span><br><span class="line">			out.flush();</span><br><span class="line">		&#125;<span class="keyword">catch</span>(IOException e) &#123;&#125;</span><br><span class="line">		<span class="keyword">finally</span> &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				socket.close();</span><br><span class="line">			&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>accept后创建线程 主线程继续监听下一个连接  </li>
<li>线程获得socket后利用这个socket进行通讯，使用完后将其关闭  这里注意千万别将<code>Socket s=server.accept()</code>放入在try -with-resource 括号中，因为这会在主线程中进行socket关闭，这时候可能线程本身还没完成任务，必须让线程本身对socket进行关闭操作</li>
</ul>
<p>关闭服务器socket后会释放端口，并中断所有被accept还在打开的所有socket</p>
<p>然后这个ServerSocket 可利用try-with-resources来进行自动close</p>
<p>并且有<code>isClosed()</code>进行判断  但是如果是 用一个无参函数构造的话  它也会认为是未关闭 isClosed是false</p>
<p>isBound表示是否绑定端口  但是曾经，如果绑定过端口，现在不绑定也算true 综合来看，</p>
<p><code>ss.isBound()&amp;&amp;!ss.isClosed()</code> 就可以判断是否是打开的ServerSocket了</p>
<p>ServerSocket的构造</p>
<p><code>ServerSocket(int port,int queueLength)和 ServerSocket(int port,int queueLength,InetAddress bindAddress)</code></p>
<p>其中queueLength代表入站的连接数，这个不能无限制大，要看操作系统规定的最大队列长度的脸色</p>
<p>第三个参数InetAddress代表只绑定一个特定的本地IP地址，自己的本地IP 这样它只会服务于同一个网络中的本地连接</p>
<p>端口号可以传0 这样随便找可用的端口</p>
<p>或者</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ServerSocket ss=<span class="keyword">new</span> ServerSocket();</span><br><span class="line">SocketAddress http=<span class="keyword">new</span> InetSocketAddress(<span class="number">80</span>);</span><br><span class="line">ss.bind(http);</span><br></pre></td></tr></table></figure>
<p>ServerSocket信息获取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">getInetAddress()   <span class="comment">//返回服务器的使用的地址  如果有多个ip则其中返回一个 若未绑定则返回null</span></span><br><span class="line">getLocalPort()     <span class="comment">//返回监听的端口</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ServerSocket server=<span class="keyword">new</span> ServerSocket(<span class="number">0</span>);   <span class="comment">//随机端口</span></span><br><span class="line">System.out.println(server.getLocalPort());   <span class="comment">//知道其具体绑定的端口，如果未绑定到则返回-1</span></span><br></pre></td></tr></table></figure>
<p>toString能用来打印信息  addr表示socket绑定的本地网络接口的地址 如果绑定到所有接口则 0.0.0.0？？ port总是显示0</p>
<p>localhost表示服务器正在连接监听的本地端口   其实没啥用</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/23/Java枚举/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen JianLun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shaclow's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/Java枚举/" itemprop="url">Java枚举</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-23T00:52:49+08:00">
                2018-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Enum代表枚举类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dayclass</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> Monday=<span class="number">233</span>;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种也可以做出枚举，但是很蠢很不专业，所以用enum</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Day&#123;</span><br><span class="line">    MONDAY,TUESDAY,WEDNESDAY,THURSDAY,FRIDAY,SATURDAY,SUNDAY</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>枚举值一般用大写字母，然后用逗号分隔</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Day day=Day.MONDAY  <span class="comment">//使用方式异常简单</span></span><br></pre></td></tr></table></figure>
<p>实际上enum会被编译成一个类class 而且编译器会自动帮忙生成一些方法  它不能被继承</p>
<p>这个class的简单组成如下 它继承自Enum类  以上面的Day枚举类为例</p>
<ul>
<li><p>实现了values 函数 返回的是Day的数组 包含这个类的所有的列举值  父类没有</p>
</li>
<li><p>实现了 valueOf(String)  调用父类的valueof方法 通过String 返回对应的Day对象</p>
</li>
<li><p>私有的Day构造函数（String, int）</p>
</li>
<li><p>没错，每个枚举值都变成一个Day对象（public）  并且实例化  </p>
<p>你注意到参数二的那个数字 其实就是序号，在内部实现叫ordinal  这个和你在enum的枚举值的书写顺序有关从0开始 </p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//反编译Day.class</span></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Day</span> <span class="keyword">extends</span> <span class="title">Enum</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//编译器为我们添加的静态的values()方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Day[] values()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> (Day[])$VALUES.clone();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//编译器为我们添加的静态的valueOf()方法，注意间接调用了Enum也类的valueOf方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Day <span class="title">valueOf</span><span class="params">(String s)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (Day)Enum.valueOf(com/zejian/enumdemo/Day, s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//私有构造函数</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Day</span><span class="params">(String s, <span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(s, i);</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">//前面定义的7种枚举实例</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Day MONDAY;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Day TUESDAY;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Day WEDNESDAY;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Day THURSDAY;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Day FRIDAY;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Day SATURDAY;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Day SUNDAY;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Day $VALUES[];</span><br><span class="line"><span class="keyword">static</span> </span><br><span class="line">&#123;    </span><br><span class="line">    <span class="comment">//实例化枚举实例</span></span><br><span class="line">    MONDAY = <span class="keyword">new</span> Day(<span class="string">"MONDAY"</span>, <span class="number">0</span>);</span><br><span class="line">    TUESDAY = <span class="keyword">new</span> Day(<span class="string">"TUESDAY"</span>, <span class="number">1</span>);</span><br><span class="line">    WEDNESDAY = <span class="keyword">new</span> Day(<span class="string">"WEDNESDAY"</span>, <span class="number">2</span>);</span><br><span class="line">    THURSDAY = <span class="keyword">new</span> Day(<span class="string">"THURSDAY"</span>, <span class="number">3</span>);</span><br><span class="line">    FRIDAY = <span class="keyword">new</span> Day(<span class="string">"FRIDAY"</span>, <span class="number">4</span>);</span><br><span class="line">    SATURDAY = <span class="keyword">new</span> Day(<span class="string">"SATURDAY"</span>, <span class="number">5</span>);</span><br><span class="line">    SUNDAY = <span class="keyword">new</span> Day(<span class="string">"SUNDAY"</span>, <span class="number">6</span>);</span><br><span class="line">    $VALUES = (<span class="keyword">new</span> Day[] &#123;</span><br><span class="line">        MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumDemo2</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[]args)</span> </span>&#123;</span><br><span class="line">		Day[]days=Day.values();</span><br><span class="line">		System.out.println(<span class="string">"days "</span>+Arrays.toString(days));</span><br><span class="line">		Day day1=Day.valueOf(<span class="string">"FRIDAY"</span>);</span><br><span class="line">		System.out.println(<span class="string">"day"</span>+day1);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>抽象Enum类</p>
<p>实现的方法</p>
<ul>
<li>compareTo  比较的其实是 ordinal</li>
<li>equals  </li>
<li>getDeclaringClass  返回枚举常量的枚举类型对应的class对象</li>
<li>name  返回枚举常量的名称</li>
<li>ordinal 返回枚举常量的序号</li>
<li>toString  和name差不多</li>
<li>valueOf(Class<t>,String)   返回带指定名称的指定枚举类型的枚举常量。  这个相比子类的valueOf 多个class的参数</t></li>
</ul>
<p>它的getDeclaringClass比较特别给出代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Class&lt;E&gt; <span class="title">getDeclaringClass</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="comment">//获取class对象引用，getClass()是Object的方法</span></span><br><span class="line">     Class&lt;?&gt; clazz = getClass();</span><br><span class="line">     <span class="comment">//获取父类Class对象引用</span></span><br><span class="line">     Class&lt;?&gt; zuper = clazz.getSuperclass();</span><br><span class="line">     <span class="keyword">return</span> (zuper == Enum.class) ? (Class&lt;E&gt;)clazz : (Class&lt;E&gt;)zuper;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>这个是首先获取对象的类对象，然后再通过<code>getSuperClass</code>方法去获得父类方法，通过判断是否是Enum.class来进行不同处理</p>
<ul>
<li>如果不是Enum的派生类就只是返回该对象的父类</li>
<li>如果是Enum的派生类则返回对象本身的类对象</li>
</ul>
<p>虽然values方法是子类独有，父类是没有，所以不能通过向上转型来使用values 但通过Enum的class对象的getEnumConstants方法，我们仍能一次性获取所有的枚举实例常量</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//正常使用</span></span><br><span class="line">Day[] ds=Day.values();</span><br><span class="line"><span class="comment">//向上转型Enum</span></span><br><span class="line">Enum e = Day.MONDAY;</span><br><span class="line"><span class="comment">//无法调用,没有此方法</span></span><br><span class="line"><span class="comment">//e.values();</span></span><br><span class="line"><span class="comment">//获取class对象引用</span></span><br><span class="line">Class&lt;?&gt; clasz = e.getDeclaringClass();</span><br><span class="line"><span class="keyword">if</span>(clasz.isEnum()) &#123;</span><br><span class="line">    Day[] dsz = (Day[]) clasz.getEnumConstants();</span><br><span class="line">    System.out.println(<span class="string">"dsz:"</span>+Arrays.toString(dsz));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   输出结果:</span></span><br><span class="line"><span class="comment">   dsz:[MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY]</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>实际上枚举类，它其实可以实现class的功能 我们可以向enum类中添加方法,覆盖方法和变量，甚至是main方法，</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//覆盖方法toString 和实现了自己的getDesc方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Day2 &#123;</span><br><span class="line">	MONDAY(<span class="string">"星期一"</span>),</span><br><span class="line">	TUESDAY(<span class="string">"星期二"</span>),</span><br><span class="line">	WEDNESDAY(<span class="string">"星期三"</span>),</span><br><span class="line">	THURSDAY(<span class="string">"星期四"</span>),</span><br><span class="line">	FRIDAY(<span class="string">"星期五"</span>),</span><br><span class="line">	SATURDAY(<span class="string">"星期六"</span>),</span><br><span class="line">	SUNDAY(<span class="string">"星期日"</span>);</span><br><span class="line">	<span class="keyword">private</span> String desc;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Day2</span><span class="params">(String desc)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.desc=desc;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getDesc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> desc;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//覆盖方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> desc;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[]args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(Day2 day:Day2.values()) &#123;</span><br><span class="line">			System.out.println(<span class="string">"name: "</span>+day.name()+<span class="string">" ,desc:"</span>+day.getDesc()+<span class="string">"  toString"</span>+day.toString());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>enum与抽象方法</p>
<p>与常规抽象类一样，enum类允许我们为其定义抽象方法，然后使每个枚举实例都实现该方法，以便产生不同的行为方式，注意abstract关键字对于枚举类不一定需要?(要把？)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> EnumDemo3 &#123;</span><br><span class="line">	FIRST&#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"First time"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//每个实例内实现抽象方法</span></span><br><span class="line">	SECOND&#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"Second time"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//定义抽象方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">getInfo</span><span class="params">()</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[]args)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"First: "</span>+EnumDemo3.FIRST.getInfo());</span><br><span class="line">		System.out.println(<span class="string">"Second: "</span>+EnumDemo3.SECOND.getInfo());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>有时候我们可以用接口来 将多个实现该接口的枚举类放在一起</p>
<p>还可以有枚举嵌套</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Meal&#123;</span><br><span class="line">  APPETIZER(Food.Appetizer.class),</span><br><span class="line">  MAINCOURSE(Food.MainCourse.class),</span><br><span class="line">  DESSERT(Food.Dessert.class),</span><br><span class="line">  COFFEE(Food.Coffee.class);</span><br><span class="line">  <span class="keyword">private</span> Food[] values;</span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="title">Meal</span><span class="params">(Class&lt;? extends Food&gt; kind)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//通过class对象获取枚举实例</span></span><br><span class="line">    values = kind.getEnumConstants();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Food</span> </span>&#123;</span><br><span class="line">    <span class="keyword">enum</span> Appetizer implements Food &#123;</span><br><span class="line">      SALAD, SOUP, SPRING_ROLLS;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">enum</span> MainCourse implements Food &#123;</span><br><span class="line">      LASAGNE, BURRITO, PAD_THAI,</span><br><span class="line">      LENTILS, HUMMOUS, VINDALOO;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">enum</span> Dessert implements Food &#123;</span><br><span class="line">      TIRAMISU, GELATO, BLACK_FOREST_CAKE,</span><br><span class="line">      FRUIT, CREME_CARAMEL;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">enum</span> Coffee implements Food &#123;</span><br><span class="line">      BLACK_COFFEE, DECAF_COFFEE, ESPRESSO,</span><br><span class="line">      LATTE, CAPPUCCINO, TEA, HERB_TEA;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>枚举值可以作为switch的判断</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color &#123;GREEN,RED,BLUE&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumDemo4</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printName</span><span class="params">(Color color)</span></span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (color)&#123;</span><br><span class="line">            <span class="keyword">case</span> BLUE: <span class="comment">//无需使用Color进行引用</span></span><br><span class="line">                System.out.println(<span class="string">"蓝色"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> RED:</span><br><span class="line">                System.out.println(<span class="string">"红色"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> GREEN:</span><br><span class="line">                System.out.println(<span class="string">"绿色"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        printName(Color.BLUE);</span><br><span class="line">        printName(Color.RED);</span><br><span class="line">        printName(Color.GREEN);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//蓝色</span></span><br><span class="line">        <span class="comment">//红色</span></span><br><span class="line">        <span class="comment">//绿色</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>未完待续 。。。。主要是枚举的一些的set 和 map</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/23/Java包的概述/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen JianLun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shaclow's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/Java包的概述/" itemprop="url">Java包的概述</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-23T00:52:49+08:00">
                2018-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>JDK所提供的所有标准Java类都存放在Java包中，如java.lang包中包含了运行Java必不可少的系统类。由于系统会自动将java.lang引入，所以不需要在源文件中用import语句来显示地引入这个包。另外，Java跪地过java.util和java.io是必须提供的标准包，在JDK中常用的包有以下几种：</p>
<p>1.java.lang：语言包</p>
<p>2.java.util：实用包</p>
<p>3.java.awt：抽象窗口工具包</p>
<p>4.javax.swing：轻量级的窗口工具包，这是目前使用最广泛的GUI程序设计包</p>
<p>5.java.io：输入输出包</p>
<p>6.java.net：网络函数包</p>
<p>7.java.applet：编制applet用到的包（目前编制applet程序时，更多的是使用swing中的JApplet类）。</p>
<p>下面分别对这几个包做下介绍：</p>
<p>①.java.lang：语言包</p>
<p>这是Java语言的核心包，系统自动将这个包引入到用户程序，该包中主要类有：</p>
<p>1.object类：它是所有类的父类，其中定义的方法其它类都可以使用。</p>
<p>2.数据类型包装类：简单的数据类型的类包装，包括Integer、Float、Boolean等。</p>
<p>3.数学类Math：提供常量和数学函数，包括E和PI常数及abs()、sin()、cos()、min()、max()、random()等方法，这些常量和方法都是静态的。</p>
<p>4.字符串类String和StringBuffer类。</p>
<p>5.系统和运行时类：System类提供一个独立于具体计算机系统资源的编程界面；Runtime类可以直接访问运行时资源。</p>
<p>6.操作类 ：Class和ClassLoader类。类Class提供了对象运行时的若干信息，ClassLoader是一个抽象类，它提供了将类名转换成文件名并在文件系统中查找并装载该文件的方法。</p>
<p>7.线程类：Thread类。Java是一个多线程环境，主要有Thread（线程建立）、ThreadDeath（线程结束后的清理操作）、ThreadGroup（组织一组线程）和Runnable（建立线程的交互工具）等类。</p>
<p>8.错误和异常处理类：Throwable（所有错误和异常处理的父类），Exception（处理异常，需要用户捕获处理）和Error（处理硬件错误，不要求用户捕获处理）。</p>
<p>9.过程类Process：它支持系统过程，当实用类Runtime执行系统命令时，会建立处理系统过程的Process类。</p>
<p>②.实用包</p>
<p>实用包提供了各种实用功能的类，主要包括日期类、数据结构类和随机数类等。</p>
<p>1.日期类：包括Date（获取日期和时间）、Calendar（抽象类，日历类）和GregorianCalendar（Calendar类的子类）类。</p>
<p>2.数据结构类：包括链表类LinkedList、向量类Vector、栈类Stack和散列表类Hashtable等。</p>
<p>3.随机数类Random：它封装了Math类中的random方法，并提供了更多的辅助功能。</p>
<p>③抽象窗口工具包</p>
<p>Java的java.awt提供了绘图和图像类，主要用于编写GUI程序，包括按钮、标签等常用组件以及相应的事件类。</p>
<p>1.组件类：包括Button，Panel，Label，Choice等类，用于设计图形界面。</p>
<p>2事件包：在java.awt.event中包括各种事件处理的接口和类</p>
<p>3.颜色包：在java.awt.color中提供用于颜色的类。</p>
<p>4.字体包：在java.awt.font中提供用于字体相关的接口和类。</p>
<p>④输入输出包</p>
<p>java.io提供了系统输入输出类和接口，只要包括输入流类InputStream和输出流OutputStream就可以实现文件的输入输出、管道的数据传输以及网络数据传输的功能</p>
<p>⑤网络函数包</p>
<p>java.net提供了实现网络应用程序的类，主要包括用于实现Socket通信的Socket类，此外还提供了便于处理URL的类</p>
<p>⑥applet包</p>
<p>java.applet是专为创建Applet程序提供的包，它包含了基本的applet类和通信类，目前基本上被JApplet类所代替。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/23/JavaSE(一)Void和void/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen JianLun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shaclow's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/JavaSE(一)Void和void/" itemprop="url">JavaSE(一)Void和void</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-23T00:52:49+08:00">
                2018-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>void代表函数没有返回结果</p>
<p>Void其实是一种类型 它不可以继承或者实例化  Void作为函数返回代表函数只能返回null</p>
<p>Void通常是用于反射当中</p>
<p>例如<code>Future&lt;T&gt;</code>用来保存结果。Future的get方法会返回结果(类型为T)。 如果操作并没有返回值，用Void调用get后结果计算完毕则返回后将会返回null。</p>
<p>Void也用于无值的Map中，例如<code>Map&lt;T,Void&gt;</code>这样map将具<code>Set&lt;T&gt;</code>有一样的功能</p>
<p>同理Callable<void>也是同理 好像是没 Callable<void>的</void></void></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/23/javascript补习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen JianLun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shaclow's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/javascript补习/" itemprop="url">javascript补习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-23T00:52:49+08:00">
                2018-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>document.write(“</p><h1>JS可以用来写入元素</h1>“);写入元素<p></p>
</li>
<li><p>var k=document.getElementById(“idname”);   获取元素</p>
<ul>
<li>k.innerHTML=”heihei”      改变元素内部的内容</li>
<li>k.src/xxx=””      改变元素的属性</li>
<li>k.style.xxx 改变标签的样式</li>
</ul>
</li>
</ul>
<p>引入js文件 <code>&lt;script src=&quot;myScript.js&quot;&gt;&lt;/script&gt;</code></p>
<p>js输出</p>
<ol>
<li>window.alert</li>
<li>document.getElementById(“”).innerHTML();</li>
<li>document.write()  如果在文档已完成加载后执行 document.write，整个 HTML 页面将被覆盖。但如果直接写的话就是当作一个html标签来看待</li>
<li>console.log</li>
</ol>
<p>js大小写敏感</p>
<p>代码块以左花括号开始，以右花括号结束。</p>
<p>代码块的作用是一并地执行语句序列。</p>
<p>您可以在文本字符串中使用反斜杠对代码行进行换行</p>
<p>document.write(“你好 \<br>世界!”);</p>
<p>：JavaScript 是脚本语言。浏览器会在读取代码时，逐行地执行脚本代码。而对于传统编程来说，会在执行前对所有代码进行编译。</p>
<p>如果重新声明 JavaScript 变量，该变量的值不会丢失：</p>
<p>在以下两条语句执行后，变量 carname 的值依然是 “Volvo”：</p>
<p>var carname=”Volvo”;<br>var carname;</p>
<p>对象</p>
<p>var person = {<br>​    firstName:”John”,<br>​    lastName:”Doe”,<br>​    age:50,<br>​    eyeColor:”blue”</p>
<p>​     fullname: function(){</p>
<p>​    return this.firstName+” “+this.lastName;</p>
<p>}</p>
<p>};</p>
<p>你可以通过两种方式访问对象属性:</p>
<ul>
<li>person.firstName</li>
<li>person[“firstName”]</li>
</ul>
<p>访问对象方法 document.write(person.fullname());</p>
<p>好像变量都是能看作 作为window对象的一个属性所以所有的变量可以通过</p>
<ul>
<li>window.varname</li>
<li>this.varname</li>
<li>varname</li>
</ul>
<p>不过如果是没有写var 直接是赋值的那种  是全局对象的可配置属性 可以被delete掉</p>
<p>全局变量</p>
<ol>
<li>在函数外定义的变量</li>
<li>没有var定义的变量</li>
</ol>
<p>所有的全局变量都可通过window访问</p>
<h2 id="常见的HTML事件"><a href="#常见的HTML事件" class="headerlink" title="常见的HTML事件"></a>常见的HTML事件</h2><p>下面是一些常见的HTML事件的列表:</p>
<table>
<thead>
<tr>
<th>事件</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>onchange</td>
<td>HTML 元素改变</td>
</tr>
<tr>
<td>onclick</td>
<td>用户点击 HTML 元素</td>
</tr>
<tr>
<td>onmouseover</td>
<td>用户在一个HTML元素上移动鼠标</td>
</tr>
<tr>
<td>onmouseout</td>
<td>用户从一个HTML元素上移开鼠标</td>
</tr>
<tr>
<td>onkeydown</td>
<td>用户按下键盘按键</td>
</tr>
<tr>
<td>onload</td>
<td>浏览器已完成页面的加载</td>
</tr>
</tbody>
</table>
<p>switch 语句会使用恒等计算符(===)进行比较:</p>
<h2 id="Undefined-不是-Null"><a href="#Undefined-不是-Null" class="headerlink" title="Undefined 不是 Null"></a>Undefined 不是 Null</h2><p>在 JavaScript 中, <strong>null</strong> 用于对象, <strong>undefined</strong> 用于变量，属性和方法。</p>
<p>对象只有被定义才有可能为 null，否则为 undefined。</p>
<p>如果我们想测试对象是否存在，在对象还没定义时将会抛出一个错误。</p>
<p>错误的使用方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if (myObj !== null &amp;&amp; typeof myObj !== &quot;undefined&quot;)</span><br></pre></td></tr></table></figure>
<p>正确的方式是我们需要先使用 typeof 来检测对象是否已定义：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if (typeof myObj !== &quot;undefined&quot; &amp;&amp; myObj !== null)</span><br></pre></td></tr></table></figure>
<p>在每个代码块中 JavaScript 不会创建一个新的作用域，一般各个代码块的作用域都是全局的。</p>
<p>以下代码的的变量 i 返回 10，而不是 undefined：</p>
<script>
for (var i = 0; i < 10; i++) {
    // some code
}
document.getElementById("demo").innerHTML = i;
</script>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/23/JavaNIO(五)Channel的Transfer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen JianLun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shaclow's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/JavaNIO(五)Channel的Transfer/" itemprop="url">JavaNIO(五)Channel的Transfer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-23T00:52:49+08:00">
                2018-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Channel之间的数据传输</p>
<p>如果是FileChannel 有transferTo 和 transferFrom两个方法</p>
<p>transferFrom 应该是其他类型的Channel到FileChannel的方法</p>
<p>transferTo 则是FileChannel到其他类型的Channel</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//打开文件channel</span></span><br><span class="line">RandomAccessFile fromFile = <span class="keyword">new</span> RandomAccessFile(<span class="string">"fromFile.txt"</span>, <span class="string">"rw"</span>);</span><br><span class="line">FileChannel      fromChannel = fromFile.getChannel();</span><br><span class="line"><span class="comment">//打开文件channel</span></span><br><span class="line">RandomAccessFile toFile = <span class="keyword">new</span> RandomAccessFile(<span class="string">"toFile.txt"</span>, <span class="string">"rw"</span>);</span><br><span class="line">FileChannel      toChannel = toFile.getChannel();</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> position = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">long</span> count    = fromChannel.size();</span><br><span class="line"></span><br><span class="line"><span class="comment">//向另外一个channel进行数据传输</span></span><br><span class="line">toChannel.transferFrom(fromChannel, position, count);</span><br><span class="line"></span><br><span class="line"><span class="comment">//fromChannel.transferTo(toChannel,position,count);</span></span><br></pre></td></tr></table></figure>
<p>注意使用transferFrom  socketChannel来说 它传输的数据只是它现在当前有的数据，后面新增的数据是不被计算在内的，所以你数据正常不会是完全传递的</p>
<p>注意使用transferTo  socketChannel来说，它会一直读取 直到send缓存满了为止</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/23/javascript表单验证/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen JianLun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shaclow's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/23/javascript表单验证/" itemprop="url">javascript表单验证</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-12-23T00:52:49+08:00">
                2018-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>javascript表单验证</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"myForm"</span> <span class="attr">action</span>=<span class="string">"demo_form.php"</span> <span class="attr">onsubmit</span>=<span class="string">"return validateForm()"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- onsubmit--&gt;</span></span><br><span class="line">名字: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"fname"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Js可以访问表单中的元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validateForm</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x=<span class="built_in">document</span>.forms[<span class="string">"myForm"</span>][<span class="string">"fname"</span>];        <span class="comment">//通过name来确定具体组件</span></span><br><span class="line">    <span class="keyword">if</span>(x==<span class="literal">null</span>||x==<span class="string">""</span>)&#123;</span><br><span class="line">        alert(<span class="string">"请填入你的名字"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>表单的自动控制</p>
<p>如果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">checkValidity() 如果input元素中数据合法返回<span class="literal">true</span>否则为<span class="literal">false</span></span><br><span class="line">设置 input 元素的 validationMessage 属性，用于自定义错误提示信息的方法。</span><br><span class="line"></span><br><span class="line">使用 setCustomValidity 设置了自定义提示后，validity.customError 就会变成<span class="literal">true</span>，则 checkValidity 总是会返回<span class="literal">false</span>。如果要重新判断需要取消自定义提示，方式如下：</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"id1"</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">min</span>=<span class="string">"100"</span> <span class="attr">max</span>=<span class="string">"300"</span> <span class="attr">required</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"myFunction()"</span>&gt;</span>验证<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>如果输入的数字小于 100 或大于300，会提示错误信息。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"demo"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> inpObj = <span class="built_in">document</span>.getElementById(<span class="string">"id1"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (inpObj.checkValidity() == <span class="literal">false</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">"demo"</span>).innerHTML = inpObj.validationMessage;</span></span><br><span class="line"><span class="javascript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">        d	ocument.getElementById(<span class="string">"demo"</span>).innerHTML = <span class="string">"输入正确"</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Validity-属性"><a href="#Validity-属性" class="headerlink" title="Validity 属性"></a>Validity 属性</h2><p>input 元素的 <strong>validity 属性</strong>包含一系列关于 validity 数据属性:</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>customError</td>
<td>设置为 true, 如果设置了自定义的 validity 信息。</td>
</tr>
<tr>
<td>patternMismatch</td>
<td>设置为 true, 如果元素的值不匹配它的模式属性。</td>
</tr>
<tr>
<td>rangeOverflow</td>
<td>设置为 true, 如果元素的值大于设置的最大值。</td>
</tr>
<tr>
<td>rangeUnderflow</td>
<td>设置为 true, 如果元素的值小于它的最小值。</td>
</tr>
<tr>
<td>stepMismatch</td>
<td>设置为 true, 如果元素的值不是按照规定的 step 属性设置。</td>
</tr>
<tr>
<td>tooLong</td>
<td>设置为 true, 如果元素的值超过了 maxLength 属性设置的长度。</td>
</tr>
<tr>
<td>typeMismatch</td>
<td>设置为 true, 如果元素的值不是预期相匹配的类型。</td>
</tr>
<tr>
<td>valueMissing</td>
<td>设置为 true，如果元素 (required 属性) 没有值。</td>
</tr>
<tr>
<td>valid</td>
<td>设置为 true，如果元素的值是合法的。</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Chen JianLun</p>
              <p class="site-description motion-element" itemprop="description">Embrace the trend</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">58</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chen JianLun</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
